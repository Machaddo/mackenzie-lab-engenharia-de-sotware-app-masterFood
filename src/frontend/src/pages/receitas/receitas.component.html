<div class="app-wood">
  <div class="content-centered-container mx-auto px-3 py-5">
    <div class="text-center mb-5">
      <h2 class="fw-bold text-dark">
        <i class="bi bi-book-half me-3 text-danger"></i> Minhas Receitas
        Favoritas
      </h2>
      <p class="text-muted">
        Acesse a seguir todas as receitas que você salvou.
      </p>
    </div>

    <div *ngIf="isLoading" class="text-center my-5">
      <div class="spinner-border text-dark" role="status">
        <span class="visually-hidden">Carregando receitas...</span>
      </div>
      <p class="text-muted mt-2">Carregando receitas salvas...</p>
    </div>

    <div
      *ngIf="!isLoading && receitas.length === 0"
      class="alert alert-info text-center my-5"
    >
      Você ainda não salvou nenhuma receita!
    </div>

    <div
      *ngIf="!isLoading && receitas.length > 0"
      class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4 cards-grid justify-content-center"
    >
      <div class="col" *ngFor="let r of receitas">
        <div
          class="card h-100 shadow-sm recipe-card-custom"
          (click)="abrirDetalhes(r)"
        >
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-start mb-2">
              <h5 class="card-title mb-0 fw-bold">{{ r.titulo }}</h5>
              <i class="bi bi-eye fs-5 text-secondary"></i>
            </div>
            <div class="card-info small text-muted">
              <div class="mb-1">
                <i class="bi bi-clock me-2"></i> Tempo: {{ r.tempo }}
              </div>
              <div>
                <i class="bi bi-bar-chart me-2"></i> Dificuldade:
                {{ r.dificuldade }}
              </div>
            </div>
            <div class="mt-2 small text-muted">
              <i class="bi bi-basket me-2"></i> Ingredientes: {{ r.ingredientes }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal de Detalhes da Receita -->
<div class="modal fade show" tabindex="-1" *ngIf="showModal" style="display:block; background: rgba(0,0,0,0.35);">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content rounded-4 shadow">

      <div class="modal-header border-0">
        <h5 class="modal-title fw-bold">{{ selectedRecipe?.titulo }}</h5>
        <button type="button" class="btn-close" (click)="fecharModal()"></button>
      </div>

      <div class="modal-body">

        <div class="d-flex justify-content-between text-muted small mb-3">
          <span><i class="bi bi-clock me-1"></i> {{ selectedRecipe?.tempo }}</span>
          <span><i class="bi bi-bar-chart me-1"></i> {{ selectedRecipe?.dificuldade }}</span>
        </div>

        <h6 class="fw-semibold mb-2">Ingredientes</h6>

        <ul class="list-group small">
          <li
            class="list-group-item d-flex justify-content-between align-items-center"
            *ngFor="let line of selectedRecipe?.detalhes.lines"
          >
            <span>{{ line.ingredient }}</span>
            <span class="text-muted">{{ line.amount }} {{ line.unit }}</span>
          </li>
        </ul>

      </div>

      <div class="modal-footer border-0">
        <button type="button" class="btn btn-secondary" (click)="fecharModal()">Fechar</button>
      </div>

    </div>
  </div>
</div>